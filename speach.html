<!DOCTYPE html>
<html>
  <head>
  </head>
  <body style="width:100%;height:100%">
  
  <div style="width:100%;height:100%">
	  <img style="margin:0 25%;width:50%" src="virtual-receptionist-750x410.png" />
	  </br>
	  <textarea style="margin:0 25%;width:50%;" id="results" rows="4"></textarea>
  </div>
 
<script>

	// say a message
	function speak(text, callback) {
		var u = new SpeechSynthesisUtterance();
		u.text = text;
		u.lang = 'en-US';
	 
		u.onend = function () {
			if (callback) {
				callback();
			}
		};
	 
		u.onerror = function (e) {
			if (callback) {
				callback(e);
			}
		};
	 
		speechSynthesis.speak(u);
	}

	speak('Hello sir, How can I help you today?', function (err, result) {
	
	    var recognition = new webkitSpeechRecognition();
		recognition.continuous = true;
		recognition.interimResults = true;
	 
		recognition.onresult = function (e) {
			var textarea = document.getElementById('results');
			for (var i = e.resultIndex; i < e.results.length; ++i) {
				if (e.results[i].isFinal) {
					currentTranscript = e.results[i][0].transcript;
					textarea.value += currentTranscript;
					
					//Can you here me
					if(currentTranscript.indexOf("hello") > -1) {
						speak('Hello sir. I am listening.');
					}
					
					//Can you here me
					else if(currentTranscript.indexOf("hear") > -1) {
						speak('Yes boss, I can here you.');
					}
					
					//For Search Activity
					else if(currentTranscript.indexOf("search") > -1) {
						speak('Yup, sure');
						
						//Get the source and destination
						currentTranscriptWords = currentTranscript.split(" ");
						alert(currentTranscriptWords[currentTranscriptWords.length-3] + currentTranscriptWords[currentTranscriptWords.length-1]);

					} else {
						speak('Sorry sir, that was not clear. Can you come again please?');
					}
				}
			}
		}
	 
		// start listening
		recognition.start();
	
	});


 
</script>

</body>

</html>